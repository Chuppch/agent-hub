```bash
1. 初始化 ExecutionHistoryManager
   ↓
2. 开始循环执行（step = 1 to maxSteps && !isCompleted）
   ↓
3. 第一阶段：任务分析
   3.1 【必须】调用 executionHistoryManager.getHistory() 获取历史记录
      - 返回格式化的历史记录（摘要 + 详细记录）
      - 如果是首次执行，返回 "[首次执行]"
   3.2 构建分析器提示词（包含历史记录）
   3.3 调用分析器，获取 analysisResult
   3.4 解析分析结果
   3.5 检查是否已完成
   ↓
4. 第二阶段：精准执行
   4.1 构建执行器提示词（只包含 analysisResult，当前实现中未使用历史记录）
   4.2 调用执行器，获取 executionResult
   4.3 解析执行结果
   ↓
5. 第三阶段：质量监督
   5.1 构建监督器提示词（只包含 executionResult，当前实现中未使用历史记录）
   5.2 调用监督器，获取 supervisionResult
   5.3 解析监督结果
   ↓
6. 更新执行历史
   6.1 【必须】调用 executionHistoryManager.appendStep(...) 追加步骤
      - 参数：step, analysisResult, executionResult, supervisionResult
      - 内部逻辑：
        a. 创建 StepRecord 对象
        b. 追加到 recentDetailedHistory
        c. 递增 totalSteps
        d. 动态调整 windowSize 和 compressionBatchSize
        e. 检查是否需要压缩（shouldCompress()）
        f. 【关键】如果 recentDetailedHistory.size() > windowSize
          - 自动触发 compressHistory() 进行压缩
          - 从 recentDetailedHistory 头部取出最旧的 compressionBatchSize 条记录
          - 压缩为摘要，追加到 summaryHistory
          - 从 recentDetailedHistory 中移除这 N 条记录
   ↓
7. 提取下一步任务
   ↓
8. 添加步骤间延迟
   ↓
9. 继续下一轮执行（回到步骤2）
   ↓
10. 循环结束处理
    10.1 输出执行总结
    10.2 生成最终总结报告（如果未完成）
       10.2.1 【必须】调用 executionHistoryManager.getHistory() 获取完整历史
       10.2.2 构建总结报告提示词
       10.2.3 发送给总结器生成报告
```

